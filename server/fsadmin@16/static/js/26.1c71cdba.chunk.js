(this["webpackJsonpellen-silverman"]=this["webpackJsonpellen-silverman"]||[]).push([[26],{148:function(e,t,r){"use strict";r.d(t,"k",(function(){return o})),r.d(t,"e",(function(){return i})),r.d(t,"b",(function(){return p})),r.d(t,"i",(function(){return f})),r.d(t,"h",(function(){return l})),r.d(t,"c",(function(){return d})),r.d(t,"l",(function(){return h})),r.d(t,"j",(function(){return m})),r.d(t,"d",(function(){return b})),r.d(t,"g",(function(){return v})),r.d(t,"f",(function(){return k})),r.d(t,"m",(function(){return O})),r.d(t,"a",(function(){return j}));var n=r(14),a=r.n(n),c=r(21),u=r(29),s=r.n(u),o=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("".concat("http://localhost:8000/api","/user/cart"),{cartItemIdsAndQuantities:t},{headers:{authToken:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat("http://localhost:8000/api","/user/cart"),{headers:{authToken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.delete("".concat("http://localhost:8000/api","/user/cart"),{headers:{authToken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("".concat("http://localhost:8000/api","/user/address"),{address:t},{headers:{authToken:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat("http://localhost:8000/api","/user/address"),{headers:{authToken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.put("".concat("http://localhost:8000/api","/user/address"),{addressId:t},{headers:{authToken:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.put("".concat("http://localhost:8000/api","/user/address/select"),{addressId:t},{headers:{authToken:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.put("".concat("http://localhost:8000/api","/user/address/remove"),{addressIdToRemove:t},{headers:{authToken:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("".concat("http://localhost:8000/api","/user/order"),{stripeResponse:t},{headers:{authToken:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat("http://localhost:8000/api","/user/order/").concat(t),{headers:{authToken:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),k=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat("http://localhost:8000/api","/user/order/id/").concat(t),{headers:{authToken:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.a)(a.a.mark((function e(t,r,n,c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.put("".concat("http://localhost:8000/api","/user/order/return"),{orderId:t,selectedPaintings:r,returnNotes:n},{headers:{authToken:c}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.put("".concat("http://localhost:8000/api","/user/order/cancel"),{orderId:t},{headers:{authToken:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},169:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}));var n=function(e){return{type:"UPDATE_CART",payload:e}},a=function(e){return{type:"SET_SELECTED_SHIPPING_ADDRESS",payload:e}}},170:function(e,t,r){"use strict";var n=r(26),a=r(269),c=r(2),u=r.n(c),s=r(250),o=Object(s.a)((function(e){return{paper:Object(n.a)({marginLeft:10,marginRight:10,padding:15},e.breakpoints.down("xs"),{overflow:"scroll"})}}));t.a=function(e){var t=e.children,r=o();return u.a.createElement(a.a,{className:r.paper},t)}},359:function(e,t,r){"use strict";r.r(t);var n=r(14),a=r.n(n),c=r(21),u=r(116),s=r(2),o=r.n(s),i=r(27),p=r(270),f=r(31),l=r(305),d=r(253),h=r(148),m=r(170),b=r(41),v=r(29),k=r.n(v),O=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("".concat("http://localhost:8000/api","/stripe/create-payment-intent"),{},{headers:{authToken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=r(164),w=r(169),x=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.user})),r=Object(s.useState)(!1),n=Object(u.a)(r,2),p=n[0],l=n[1],m=Object(s.useState)(null),v=Object(u.a)(m,2),k=v[0],x=v[1],y=Object(s.useState)(""),g=Object(u.a)(y,2),E=g[0],T=g[1],S=Object(s.useState)(!0),C=Object(u.a)(S,2),I=C[0],N=C[1],P=Object(s.useState)(""),_=Object(u.a)(P,2),R=_[0],D=_[1],J=Object(d.useStripe)(),A=Object(d.useElements)();Object(s.useEffect)((function(){(function(){var e=Object(c.a)(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O(t.token);case 3:r=e.sent,D(r.data.clientSecret),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t]);var F=function(){var r=Object(c.a)(a.a.mark((function r(n){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return x(null),T(!1),l(!0),r.prev=3,r.next=6,Object(h.d)(n,t.token);case 6:return r.next=8,Object(h.b)(t.token);case 8:localStorage.removeItem("cart"),e(Object(w.b)([])),f.c.success("Order paid and saved"),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(3),f.c.error(JSON.stringify(r.t0));case 16:case"end":return r.stop()}}),r,null,[[3,13]])})));return function(e){return r.apply(this,arguments)}}(),G=function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),T(!0),e.prev=2,e.next=5,J.confirmCardPayment(R,{payment_method:{card:A.getElement(d.CardElement),billing_details:{name:t.target.name.value}}});case 5:(r=e.sent).error?x("Payment failed: ".concat(r.error.message)):F(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:T(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(t.empty),x(t.error?t.error.message:"");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,p&&o.a.createElement("p",{className:"result-message"},"Payment successful."," ",o.a.createElement(b.b,{className:"standard-link underlined",to:"user/history"},"See it in your purchase history")),!p&&o.a.createElement("form",{id:"payment-form",onSubmit:G},k&&k,o.a.createElement(d.CardElement,{id:"card-element",options:{style:{base:{color:"#32325d",fontFamily:"Roboto, sans-serif",fontSmoothing:"antialiased",fontSize:"16px",backgroundColor:"white","::placeholder":{color:"#32325d"}},invalid:{color:"#fa755a",iconColor:"#fa755a",height:70,backgroundColor:"white"}}},onChange:L}),o.a.createElement(j.a,{variant:"contained",color:"primary",style:{marginTop:10,width:"100%"},disabled:E||I||p,type:"submit"},o.a.createElement("span",{id:"button-text"},E?o.a.createElement("div",{className:"spinner",id:"spinner"}):"Pay"))))},y=Object(l.a)("pk_test_51I86TDBHqimvtGMdJFZhlsQ9WfUnU8igsqVELYGQuCrMag5H4NoLmr0mo1OTglIv3WoGi9mz4IKeRq8QJOgxFbS400c99hbUwm");t.default=function(e){var t=e.history,r=Object(i.c)((function(e){return e.user})),n=Object(s.useState)({}),l=Object(u.a)(n,2),b=l[0],v=l[1];Object(s.useEffect)((function(){(function(){var e=Object(c.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(h.e)(r.token);case 3:(n=e.sent).data.userCart||t.push("/cart"),v(n.data.userCart),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f.c.error(e.t0);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[r,t]);return o.a.createElement("div",{className:"page-frame"},o.a.createElement(m.a,null,o.a.createElement(p.a,{variant:"h5"},"Complete purchase"),o.a.createElement(p.a,{variant:"body1",style:{marginBottom:10}},"Total: $",b.cartTotal),o.a.createElement(d.Elements,{stripe:y},o.a.createElement(x,null))))}}}]);
//# sourceMappingURL=26.1c71cdba.chunk.js.map